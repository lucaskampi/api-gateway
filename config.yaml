server:
  host: "0.0.0.0"
  port: 8080
  read_timeout_ms: 5000
  write_timeout_ms: 5000

jwt:
  secret: "your-secret-key-change-in-production"
  issuer: "api-gateway"

otel:
  endpoint: "jaeger:4318"
  service_name: "api-gateway"

cors:
  allow_origins: ["*"]
  allow_methods: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
  allow_headers: ["Origin", "Content-Type", "Accept", "Authorization", "X-Request-ID"]
  allow_credentials: false
  expose_headers: ["X-Request-ID"]
  max_age: 300

global_rate_limit:
  rps: 1000
  burst: 1200
  key_by: "global"

routes:
  - path: "/api/users/*"
    upstream: "http://localhost:8081"
    methods: ["GET", "POST", "PUT", "DELETE"]
    strip_prefix: "/api/users"
    auth_required: true
    rate_limit:
      rps: 100
      burst: 150
      key_by: "user"
    timeout_ms: 5000
    retry:
      attempts: 3
      backoff_ms: 100

  - path: "/api/orders/*"
    upstream: "http://localhost:8081"
    methods: ["GET", "POST"]
    strip_prefix: "/api/orders"
    auth_required: true
    rate_limit:
      rps: 50
      burst: 75
      key_by: "user"
    timeout_ms: 3000

  - path: "/api/public/*"
    upstream: "http://localhost:8081"
    methods: ["GET", "POST"]
    strip_prefix: "/api/public"
    auth_required: false
    rate_limit:
      rps: 200
      burst: 250
      key_by: "ip"
    timeout_ms: 5000
